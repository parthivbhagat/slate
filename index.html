<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>SMART on FHIR Starter APP</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>This document will help you get started on how to use SMART on FHIR API to create your app with CERNER</p>

<h1 id="project-set-up">Project Set up</h1>

<p>Create your project on any hosting platform and create following files:</p>

<ul>
<li>launch.html </li>
<li>index.html </li>
<li>load_data.js </li>
<li>draw_visualization.js and </li>
<li>lib folder</li>
</ul>

<h1 id="download-fhir-client-js">Download fhir-client.js</h1>

<p>Download <a href="https://github.com/smart-on-fhir/client-js/blob/master/dist/fhir-client.js"><strong>fhir-client.js</strong></a> and place it under lib folder. This is the open source FHIR javascript library which would help us with OAUTH2 transactions.</p>

<p>The SMART on FHIR JavaScript client library helps you build browser-based SMART apps that interact with a FHIR REST API server. It can help your app get authorization tokens, provide information about the user and patient record in context, and issue API calls to fetch clinical data. This tutorial will lead you through the basics of building a SMART app using the JavaScript client.</p>

<p>The SMART JS client uses the open-source fhir.js for interfacing with SMART API servers. Upon successfully initializing and negotiating the SMART authorization sequence, the client will expose one or two instances of the fhir.js client as applicable via the following handles :</p>

<ul>
<li><em>smart.api</em> Non-context aware API for executing operations on all authorized resources</li>
<li><em>smart.patient.api</em> Context aware API which automatically applies its operations to the patient in context</li>
</ul>

<h1 id="register-app">Register APP</h1>

<p>Once we have this done and hosted our APP, we will now register our APP with CERNER. Go to the link <a href="http://www.cerner.com/FHIR_Application_Authorization_Request/">FHIR Application Authorization Request</a>. and fill up following details</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Application Name</td>
<td>Any name for your APP you want to give</td>
</tr>
<tr>
<td>Redirect URL</td>
<td>Just put your base app url. Like https://app_url/</td>
</tr>
<tr>
<td>Email Address</td>
<td>Your email address to get the details for client id</td>
</tr>
<tr>
<td>Logo URL</td>
<td></td>
</tr>
<tr>
<td>SMART Launch URL</td>
<td>URL to the launch.html file . Like https://app_url/launch.html</td>
</tr>
<tr>
<td>Scope Required</td>
<td>Select User-Specific Scope. Select online_access, launch, openid, profile and Patient.read</td>
</tr>
<tr>
<td>FHIR version</td>
<td>Select DSTU Final</td>
</tr>
</tbody></table>

<p>and click Submit. This will send request to CERNER FHIR group for them to create client id for the app authorization.</p>

<p>After this you will receive an email stating what your Client ID and Launch URL is.</p>

<h1 id="initializing-the-client">Initializing the client</h1>

<p>Before you are able to run any operations against the FHIR API using the JS client, you will need to initialize it first.</p>
<pre class="highlight javascript"><code><span class="o">&lt;!</span><span class="nx">DOCTYPE</span> <span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">html</span> <span class="nx">lang</span><span class="o">=</span><span class="s2">"en"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">http</span><span class="o">-</span><span class="nx">equiv</span><span class="o">=</span><span class="s2">"Content-Type"</span> <span class="nx">content</span><span class="o">=</span><span class="s2">"text/html; charset=utf-8"</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">http</span><span class="o">-</span><span class="nx">equiv</span><span class="o">=</span><span class="s2">"X-UA-Compatible"</span> <span class="nx">content</span><span class="o">=</span><span class="s2">"IE=edge"</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">SMART</span> <span class="nx">on</span> <span class="nx">FHIR</span> <span class="nx">Starter</span> <span class="nx">APP</span><span class="o">&lt;</span><span class="sr">/title&gt;   </span><span class="err"> 
</span>  <span class="o">&lt;</span><span class="sr">/head</span><span class="err">&gt;
</span>  <span class="nx">Loading</span><span class="p">...</span>
  <span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"./lib/fhir-client.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
      <span class="nx">FHIR</span><span class="p">.</span><span class="nx">oauth2</span><span class="p">.</span><span class="nx">authorize</span><span class="p">({</span>
        <span class="s1">'client_id'</span><span class="p">:</span> <span class="s1">'df7c5a17-52dd-4c88-8a32-cdfb557ba758'</span><span class="p">,</span>
        <span class="s1">'scope'</span><span class="p">:</span>  <span class="s1">'patient/Patient.read launch online_access openid profile'</span>
      <span class="p">});</span>
    <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/body</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/html</span><span class="err">&gt;
</span></code></pre>

<blockquote>
<p>Make sure to replace CLIENT_ID with the client id provided in the email.</p>
</blockquote>

<h1 id="obtaining-the-context">Obtaining the context</h1>

<p>Once the client is initialized, you can obtain the context in which it was launched (the user who authorized the client and, if applicable, the patient that has been selected) by using the following methods:</p>

<ul>
<li><em>smart.user.read()</em></li>
<li><em>smart.patient.read()</em></li>
</ul>

<p>Both of these return a jQuery Deferred object which you can register a success callback to process the returned FHIR resource.</p>

<p>Following operations available in <a href="https://github.com/FHIR/fhir.js">fhir.js</a> are supported:</p>

<ul>
<li><em>read</em> Read the current state of a given resource</li>
<li><em>search</em> Obtain a resource bundle matching specific search criteria</li>
<li><em>fetchAll</em> Retrieve the complete set of resources matching specific search criteria
and many others</li>
</ul>

<p>Please see the fhir.js documentation for the complete list of available operations.</p>
<pre class="highlight javascript"><code><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nb">window</span><span class="p">){</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">extractData</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>

    <span class="kd">function</span> <span class="nx">isLeapYear</span><span class="p">(</span><span class="nx">year</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">29</span><span class="p">).</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">===</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">calculateAge</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">date</span><span class="p">),</span> <span class="nx">now</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
      <span class="kd">let</span> <span class="nx">years</span> <span class="o">=</span> <span class="nx">now</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">-</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
      <span class="nx">d</span><span class="p">.</span><span class="nx">setFullYear</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">+</span> <span class="nx">years</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d</span> <span class="o">&gt;</span> <span class="nx">now</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">years</span><span class="o">--</span><span class="p">;</span>
          <span class="nx">d</span><span class="p">.</span><span class="nx">setFullYear</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="kr">const</span> <span class="nx">days</span> <span class="o">=</span> <span class="p">(</span><span class="nx">now</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getTime</span><span class="p">())</span> <span class="o">/</span> <span class="p">(</span><span class="mi">3600</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">years</span> <span class="o">+</span> <span class="nx">days</span> <span class="o">/</span> <span class="p">(</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="nx">now</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">())</span> <span class="p">?</span> <span class="mi">366</span> <span class="p">:</span> <span class="mi">365</span><span class="p">);</span>
    <span class="p">}</span>


    <span class="kd">function</span> <span class="nx">defaultPatient</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
       <span class="s1">'fname'</span> <span class="p">:</span> <span class="p">{</span><span class="s1">'value'</span><span class="p">:</span> <span class="kc">null</span><span class="p">},</span>
       <span class="s1">'lname'</span> <span class="err">:</span> <span class="p">{</span><span class="s1">'value'</span><span class="err">:</span> <span class="kc">null</span><span class="p">},</span>
       <span class="s1">'gender'</span> <span class="err">:</span> <span class="p">{</span><span class="s1">'value'</span><span class="err">:</span> <span class="kc">null</span><span class="p">},</span>
       <span class="s1">'birthday'</span> <span class="err">:</span> <span class="p">{</span><span class="s1">'value'</span><span class="err">:</span> <span class="kc">null</span><span class="p">},</span>
       <span class="s1">'age'</span> <span class="err">:</span> <span class="p">{</span><span class="s1">'value'</span><span class="err">:</span> <span class="kc">null</span><span class="p">}</span>
      <span class="p">};</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">onError</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Loading error'</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="nx">ret</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">onReady</span><span class="p">(</span><span class="nx">smart</span><span class="p">)</span>  <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">smart</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="s1">'patient'</span><span class="p">))</span> <span class="p">{</span> 
        <span class="kr">const</span> <span class="nx">patient</span> <span class="o">=</span> <span class="nx">smart</span><span class="p">.</span><span class="nx">patient</span><span class="p">;</span>
        <span class="kr">const</span> <span class="nx">pt</span> <span class="o">=</span> <span class="nx">patient</span><span class="p">.</span><span class="nx">read</span><span class="p">();</span>

        <span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="nx">pt</span><span class="p">).</span><span class="nx">fail</span><span class="p">(</span><span class="nx">onError</span><span class="p">);</span>

        <span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="nx">pt</span><span class="p">).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">patient</span><span class="p">)</span> <span class="p">{</span>
          <span class="kr">const</span> <span class="nx">gender</span> <span class="o">=</span> <span class="nx">patient</span><span class="p">.</span><span class="nx">gender</span><span class="p">;</span>
          <span class="kr">const</span> <span class="nx">dob</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">patient</span><span class="p">.</span><span class="nx">birthDate</span><span class="p">);</span>     
          <span class="kr">const</span> <span class="nx">day</span> <span class="o">=</span> <span class="nx">dob</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span> 
          <span class="kr">const</span> <span class="nx">monthIndex</span> <span class="o">=</span> <span class="nx">dob</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
          <span class="kr">const</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">dob</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>

          <span class="kr">const</span> <span class="nx">dobStr</span> <span class="o">=</span> <span class="nx">monthIndex</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">day</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">year</span><span class="p">;</span>

          <span class="kr">const</span> <span class="nx">fname</span> <span class="o">=</span> <span class="nx">patient</span><span class="p">.</span><span class="nx">name</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">given</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">' '</span><span class="p">);</span>
          <span class="kr">const</span> <span class="nx">lname</span> <span class="o">=</span> <span class="nx">patient</span><span class="p">.</span><span class="nx">name</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">family</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">' '</span><span class="p">);</span>
          <span class="kr">const</span> <span class="nx">age</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">calculateAge</span><span class="p">(</span><span class="nx">dob</span><span class="p">));</span>

          <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">defaultPatient</span><span class="p">();</span>
          <span class="nx">p</span><span class="p">.</span><span class="nx">birthday</span> <span class="o">=</span> <span class="p">{</span><span class="na">value</span><span class="p">:</span><span class="nx">dobStr</span><span class="p">};</span>
          <span class="nx">p</span><span class="p">.</span><span class="nx">gender</span> <span class="o">=</span> <span class="p">{</span><span class="na">value</span><span class="p">:</span><span class="nx">gender</span><span class="p">};</span>
          <span class="nx">p</span><span class="p">.</span><span class="nx">fname</span> <span class="o">=</span> <span class="p">{</span><span class="na">value</span><span class="p">:</span><span class="nx">fname</span><span class="p">};</span>
          <span class="nx">p</span><span class="p">.</span><span class="nx">lname</span> <span class="o">=</span> <span class="p">{</span><span class="na">value</span><span class="p">:</span><span class="nx">lname</span><span class="p">};</span>
          <span class="nx">p</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="p">{</span><span class="na">value</span><span class="p">:</span><span class="nx">age</span><span class="p">};</span>
          <span class="nx">ret</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
        <span class="p">});</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> 
        <span class="nx">onError</span><span class="p">();</span>
      <span class="p">}</span>



    <span class="p">}</span>

    <span class="nx">FHIR</span><span class="p">.</span><span class="nx">oauth2</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span><span class="nx">onReady</span><span class="p">,</span> <span class="nx">onError</span><span class="p">);</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">promise</span><span class="p">();</span>
  <span class="p">};</span>

<span class="p">})(</span><span class="nb">window</span><span class="p">);</span>
</code></pre>

<h1 id="displaying-the-resource">Displaying the Resource</h1>

<p>We will put the display logic in draw_visualization.js file. Here is what it should look it</p>

<blockquote>
<p>draw_visualization.js</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">function</span> <span class="nx">drawVisualization</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span> 
    <span class="kd">let</span> <span class="nx">table</span> <span class="o">=</span> <span class="s1">'&lt;table&gt;&lt;thead&gt;&lt;th&gt;First Name&lt;/th&gt;&lt;th&gt;Last Name&lt;/th&gt;&lt;th&gt;Gender&lt;/th&gt;&lt;th&gt;Birth Date&lt;/th&gt;&lt;th&gt;Age&lt;/th&gt;&lt;/thead&gt;&lt;tbody&gt;'</span><span class="p">;</span>
    <span class="nx">table</span> <span class="o">+=</span> <span class="s1">'&lt;tr&gt;'</span><span class="p">;</span>            
    <span class="nx">table</span> <span class="o">+=</span> <span class="s1">'&lt;td&gt;'</span> <span class="o">+</span> <span class="nx">p</span><span class="p">.</span><span class="nx">fname</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="s1">'&lt;/td&gt;'</span><span class="p">;</span>
    <span class="nx">table</span> <span class="o">+=</span> <span class="s1">'&lt;td&gt;'</span> <span class="o">+</span> <span class="nx">p</span><span class="p">.</span><span class="nx">lname</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="s1">'&lt;/td&gt;'</span><span class="p">;</span>
    <span class="nx">table</span> <span class="o">+=</span> <span class="s1">'&lt;td&gt;'</span> <span class="o">+</span> <span class="nx">p</span><span class="p">.</span><span class="nx">gender</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="s1">'&lt;/td&gt;'</span><span class="p">;</span>
    <span class="nx">table</span> <span class="o">+=</span> <span class="s1">'&lt;td&gt;'</span> <span class="o">+</span> <span class="nx">p</span><span class="p">.</span><span class="nx">birthday</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="s1">'&lt;/td&gt;'</span><span class="p">;</span>
    <span class="nx">table</span> <span class="o">+=</span> <span class="s1">'&lt;td&gt;'</span> <span class="o">+</span> <span class="nx">p</span><span class="p">.</span><span class="nx">age</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="s1">'&lt;/td&gt;'</span><span class="p">;</span>
    <span class="nx">table</span> <span class="o">+=</span> <span class="s1">'&lt;/tr&gt;'</span><span class="p">;</span>
    <span class="nx">table</span> <span class="o">+=</span> <span class="s1">'&lt;/tbody&gt;&lt;/table&gt;'</span><span class="p">;</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'#holder'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">table</span><span class="p">);</span>  
<span class="p">}</span>
</code></pre>

<blockquote>
<p>index.html</p>
</blockquote>
<pre class="highlight javascript"><code><span class="o">&lt;!</span><span class="nx">DOCTYPE</span> <span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">html</span><span class="o">&gt;</span>  
  <span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">http</span><span class="o">-</span><span class="nx">equiv</span><span class="o">=</span><span class="s2">"Content-Type"</span> <span class="nx">content</span><span class="o">=</span><span class="s2">"text/html; charset=utf-8"</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">http</span><span class="o">-</span><span class="nx">equiv</span><span class="o">=</span><span class="s2">"X-UA-Compatible"</span> <span class="nx">content</span><span class="o">=</span><span class="s2">"IE=edge"</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">SMART</span> <span class="nx">STARTER</span> <span class="nx">APP</span><span class="o">&lt;</span><span class="sr">/title&gt;   </span><span class="err"> 
</span>  <span class="o">&lt;</span><span class="sr">/head</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">body</span> <span class="nx">style</span><span class="o">=</span><span class="s2">"margin: none;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">SMART</span> <span class="nx">STARTER</span> <span class="nx">APP</span> <span class="p">(</span> <span class="nx">PATIENT</span> <span class="nx">DEMOGRAPHICS</span> <span class="p">)</span><span class="o">&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s1">'errors'</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s1">'holder'</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>
  <span class="o">&lt;</span><span class="sr">/body</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"./lib/fhir-client.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s1">'./load_data.js'</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s1">'./lib/jquery.min.js'</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s1">'./draw_visualization.js'</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
      <span class="nx">extractData</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>          
          <span class="nx">drawVisualization</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
        <span class="p">},</span> 

        <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">$</span><span class="p">(</span><span class="s1">'#errors'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">'&lt;p&gt; Failed to call FHIR Service &lt;/p&gt;'</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">);</span>

  <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/html</span><span class="err">&gt;
</span></code></pre>

<h1 id="test">Test</h1>

<p>Commit your changes and hit the link mentioned in the email https://APP_URL/launch.html?iss=ABC&amp;launch=XYZ. You should see your index.html page with Patient demographics in it</p>

<h1 id="reading-a-single-resource">Reading a single resource</h1>

<p>Instance-level operations in FHIR work with a single resource instance at a time. Two key operations are read and vread:</p>

<ul>
<li><em>smart.api.read({type: resourceType, id: resourceId})</em> Read the current state of a given resource</li>
<li><em>smart.api.vread({type: resourceType, id: resourceId, versionId: versionId})</em> Read a specific version of a given resource</li>
</ul>

<p>Just change resourceType to the name of a FHIR resource from this complete list.</p>

<h1 id="searching-for-resources">Searching for resources</h1>

<p>To search for resources you’ll use either:</p>

<ul>
<li><p><em>smart.api.search({type: resourceType, query: queryObject})</em> when you want to search across patients, or</p></li>
<li><p><em>smart.patient.api.search({type: resourceType, query: queryObject})</em> when you only want results for the patient in context.</p></li>
</ul>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
